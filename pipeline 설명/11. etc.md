# 11. etc
### 다른 폴더로 이동
```groovy
pipeline {
    agent any 

    stages {
        stage('Hello') { 
            steps { 
                sh "pwd" // output: /var/jenkins_home/workspace/{jobName}
                sh "cd folder" //작동하지 않는다
                dir("folder"){ // cd folder의 기능을 수행한다
                    sh "pwd" // output: /var/jenkins_home/workspace/{jobName}/folder
                }
            }
        }
        stage('hi') {
            steps {
                //stage가 바뀌었기에 원래 위치로 돌아온다
                sh "pwd" // output: /var/jenkins_home/workspace/{jobName}
                dir("another"){ // cd folder의 기능을 수행한다
                    sh "pwd" // output: /var/jenkins_home/workspace/{jobName}/another
                }
            }
        }
    }
}
```
## sonarQube (아직 따라하지말것. 작동 x)
## 전제조건
### 1. sonarQube 설치 및 실행
개인 sonarQube가 존재해야한다. 없다면 아마도 아래와 같이 열 수 있을 수 있다.
(docker run -d --name sonarqube -p 9000:9000 sonarqube:8.6-community)
### 2. jenkins 플러그인 설치
jenkins 관리 -> plugin manager -> sonarQube Scanner, sonar quality gates 설치
(quality gate는 webhook과 연동하여 sonar의 분석결과를 기다리는 동안 파이프라인을 중단시킬 수 있다)
![sonarPlugin](/images/sonarPlugin.png)
### 3. sonarQube token 생성
my sonarQube 접속 -> 우상단) administration -> security) users -> token column) update tokens img 클릭
-> token name: jenkins(이름은 중요치 x) -> generate -> copy -> 다음 단계에 이용
### 4. 시스템 설정
jenkins 관리 -> configure system -> (sonarQube servers) 'environment variables enable injection…' check
-> add sonarQube 클릭 -> name: sq1(아무 식별자나 넣으면 된다), serverURL: {my sonarQube URL} -> add) jenkins
-> secret text) secret: {sonar token}, id: jenkins-sonar(단지 식별자) -> add & select & save
### 5. pipeline 사용
```groovy
pipeline {
	agent any

	stages {
		stage('Scan') {
			steps {
				withSonarQubeEnv(installationName: 'sq1') { //해당 네임은 4에서 설정해준 이름이다
					sh './mvnw clean org.sonarsource.scanner.maven:sonar-maven-plugin:3.9.0.2155:sonar'
				}
			}
		}
	}
}
```
### 다음 > [12. error](12.%20error.md)

